\hypertarget{curl_client_8c}{}\section{values\+\_\+handler/src/curl\+Client.c File Reference}
\label{curl_client_8c}\index{values\+\_\+handler/src/curl\+Client.\+c@{values\+\_\+handler/src/curl\+Client.\+c}}


Handles the c\+U\+R\+L requests made to the server in order to fetch the values for the spotlights.  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$curl/curl.\+h$>$}\\*
{\ttfamily \#include $<$stdbool.\+h$>$}\\*
{\ttfamily \#include \char`\"{}constants.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}curl\+Client.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}dmx.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{curl_client_8c_a9ef244ad52e13c3b5d49996a5c74ec36}{get\+Web\+Values} (uint8\+\_\+t $\ast$values)
\begin{DoxyCompactList}\small\item\em Fetches the values from the web, and run consistency checks. \end{DoxyCompactList}\item 
bool \hyperlink{curl_client_8c_ada762915c1adc1daef945481baedf786}{fetch\+Values} ()
\begin{DoxyCompactList}\small\item\em Fetches values from the web. \end{DoxyCompactList}\item 
bool \hyperlink{curl_client_8c_a9d0a369dd803c9ae89daf6b4741b26de}{parse\+And\+Store\+File} (uint8\+\_\+t $\ast$values)
\begin{DoxyCompactList}\small\item\em Parses the fetched values from the output file, and stores them into {\ttfamily values}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Handles the c\+U\+R\+L requests made to the server in order to fetch the values for the spotlights. 

\begin{DoxyAuthor}{Author}
Louis Blin 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
June 2015 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{curl_client_8c_ada762915c1adc1daef945481baedf786}{}\index{curl\+Client.\+c@{curl\+Client.\+c}!fetch\+Values@{fetch\+Values}}
\index{fetch\+Values@{fetch\+Values}!curl\+Client.\+c@{curl\+Client.\+c}}
\subsubsection[{fetch\+Values()}]{\setlength{\rightskip}{0pt plus 5cm}bool fetch\+Values (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{curl_client_8c_ada762915c1adc1daef945481baedf786}


Fetches values from the web. 

Fetches the values stored on the web interface at {\ttfamily R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R} with libcurl c\+U\+R\+L requests, and stores them into a temporary output file.

\begin{DoxyReturn}{Returns}
Returns {\ttfamily false} if an error occured. 
\end{DoxyReturn}
\hypertarget{curl_client_8c_a9ef244ad52e13c3b5d49996a5c74ec36}{}\index{curl\+Client.\+c@{curl\+Client.\+c}!get\+Web\+Values@{get\+Web\+Values}}
\index{get\+Web\+Values@{get\+Web\+Values}!curl\+Client.\+c@{curl\+Client.\+c}}
\subsubsection[{get\+Web\+Values(uint8\+\_\+t $\ast$values)}]{\setlength{\rightskip}{0pt plus 5cm}bool get\+Web\+Values (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{values}
\end{DoxyParamCaption}
)}\label{curl_client_8c_a9ef244ad52e13c3b5d49996a5c74ec36}


Fetches the values from the web, and run consistency checks. 


\begin{DoxyParams}{Parameters}
{\em values} & an array containing the last values fetched. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns {\ttfamily true} if fetched values are new, false otherwise or if an error occured. 
\end{DoxyReturn}
\hypertarget{curl_client_8c_a9d0a369dd803c9ae89daf6b4741b26de}{}\index{curl\+Client.\+c@{curl\+Client.\+c}!parse\+And\+Store\+File@{parse\+And\+Store\+File}}
\index{parse\+And\+Store\+File@{parse\+And\+Store\+File}!curl\+Client.\+c@{curl\+Client.\+c}}
\subsubsection[{parse\+And\+Store\+File(uint8\+\_\+t $\ast$values)}]{\setlength{\rightskip}{0pt plus 5cm}bool parse\+And\+Store\+File (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{values}
\end{DoxyParamCaption}
)}\label{curl_client_8c_a9d0a369dd803c9ae89daf6b4741b26de}


Parses the fetched values from the output file, and stores them into {\ttfamily values}. 

If writing to file fails, or if some values are out of range, an exception is raised on stderr.


\begin{DoxyParams}{Parameters}
{\em values} & an array containing the values just fetched. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns {\ttfamily true} on success and if values are new, {\ttfamily false} otherwise. 
\end{DoxyReturn}
